---
import Icon from '../Icon.astro';

export interface Props {
  items: Array<{
    icon?: string;
    title: string;
    description: string;
    stat?: string;
    statLabel?: string;
  }>;
  columns?: 2 | 3 | 4;
  cardStyle?: 'default' | 'glass' | 'problems' | 'testimonials';
  animate?: boolean;
}

const { 
  items,
  columns = 3,
  cardStyle = 'default',
  animate = true
} = Astro.props;

const gridClasses = {
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-3',
  4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4'
};

const cardClasses = {
  default: 'bg-card rounded-lg border border-border p-6 shadow-sm hover:shadow-md transition-shadow',
  glass: 'glass-card border border-border/20 hover:border-border/40 transition-all duration-500 p-8 text-center magnetic',
  problems: 'group glass-card border border-destructive/20 hover:border-destructive/40 transition-all duration-500 p-8 text-center magnetic relative',
  testimonials: 'bg-card/50 backdrop-blur-sm border border-border/50 rounded-2xl p-8 shadow-elegant hover:shadow-premium transition-all duration-300'
};
---

<div class={`grid ${gridClasses[columns]} gap-8`}>
  {items.map((item, index) => (
    <div 
      class={`${cardClasses[cardStyle]} ${animate ? 'animate-fade-in-up' : ''}`}
      style={animate ? `animation-delay: ${index * 0.2}s` : ''}
    >
      <!-- Icon -->
      {item.icon && (
        <div class="mb-6">
          <div class="inline-flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
            <Icon name={item.icon} size="xl" class={cardStyle === 'problems' ? 'text-destructive' : 'text-primary'} />
          </div>
          {cardStyle === 'problems' && (
            <div class="w-16 h-1 bg-gradient-to-r from-destructive/60 to-orange-500/60 mx-auto rounded-full mt-4"></div>
          )}
        </div>
      )}
      
      <!-- Content -->
      <h3 class={`text-xl font-bold mb-4 ${cardStyle === 'problems' ? 'text-foreground group-hover:text-destructive transition-colors duration-300' : 'text-foreground'}`}>
        {item.title}
      </h3>
      <p class="text-muted-foreground leading-relaxed">
        {item.description}
      </p>
      
      <!-- Stats -->
      {item.stat && (
        <div class="pt-6 border-t border-border mt-6">
          <div class="text-4xl font-bold text-primary mb-1">{item.stat}</div>
          <div class="text-sm text-muted-foreground">{item.statLabel}</div>
        </div>
      )}
      
      <!-- Hover Effect for problems -->
      {cardStyle === 'problems' && (
        <div class="absolute inset-0 bg-gradient-to-r from-destructive/0 to-orange-500/0 group-hover:from-destructive/5 group-hover:to-orange-500/5 rounded-2xl transition-all duration-500 -z-10"></div>
      )}
    </div>
  ))}
</div>